String.prototype.strstr=function(b){var a=this.indexOf(b)+1;return((a===0)?0:1)};String.prototype.stristr=function(b){var a=this.toLowerCase().indexOf(b.toLowerCase())+1;return((a===0)?0:1)};if(!window.console){window.console=Class.create({log:function(a){alert(a);return false}})}var alias_check_timer=0;var alias_value="";var alias_ajax_request;Ajax.Request.addMethods({abort:function(){this.transport.onreadystatechange=Prototype.emptyFunction;this.transport.abort();if(Ajax.activeRequestCount>0){Ajax.activeRequestCount--}}});var SparkFun=Class.create({initialize:function(){this.HTTP_SERVER=window.HTTP_SERVER;this.HTTPS_SERVER=window.HTTPS_SERVER;this.HTTP_STATIC=window.HTTP_STATIC;this.AUTHENTICATED=window.AUTHENTICATED;this.currencies=window.CURRENCIES;this.cookie_jar=new CookieJar({expires:7776000,path:"/"});this.current_category=this.get_current_category();this.full_layout=window.FULL_LAYOUT;this.banner=new SparkFunBanner();if(this.full_layout){this.render_menu();this.render_category();this.render_collapsible()}this.render_currency();Event.observe(document,"keydown",this.keyhandler)},get_current_category:function(){return(document.location.pathname.gsub(/^.*\/categories\/(.*)/,"#{1}"))},mind_feedback:function(){var a=$("feedback_textarea"),b=$("feedback_email"),c=$("feedback_dest");new Ajax.Request("/feedback/mind.json",{method:"post",parameters:{feedback_text:a.value.strip(),email:b.value.strip(),dest:c.value},onSuccess:function(f){var d=f.responseJSON;if(d.status==true){$("feedback").highlight();$("feedback").innerHTML="Thanks for your feedback!";return(true)}else{var e=d.errors;$$("form#feedback div.error").each(function(g){$(g).hide()});if(undefined!=e.feedback){$("error_feedback").innerHTML=e.feedback;$("error_feedback").show()}else{if(undefined!=e.feedback_text){$("error_feedback_text").innerHTML=e.feedback_text;$("error_feedback_text").show();a.focus();a.highlight()}else{if(undefined!=e.feedback_email){$("error_feedback_email").innerHTML=e.feedback_email;$("error_feedback_email").show();b.focus();b.highlight()}}}return(false)}},onFailure:function(){alert("There was an unknown error submitting your feedback, sorry for the inconvenience :(")}})},post_comment:function(a){a.stop();if(($(this).down("textarea").value.gsub(" ",""))===""){alert("you must enter a comment!");return(false)}if($(this).down("[name=entity]")&&$(this).down("[name=entity_id]")){_gaq.push(["_trackEvent","Comment","post",$(this).down("[name=entity]").value+"-"+$(this).down("[name=entity_id]").value])}$(this).request({method:"POST",asynchronous:false,onSuccess:function(c){var b=c.responseJSON;$("comments_container").innerHTML=b.html;$("comment_"+b.comment_id).scrollTo();$("comment_"+b.comment_id).highlight()}})},post_preview_comment:function(a,b){this.post_comment(a);document.location=b},hide_comment:function(a){new Ajax.Request("/comment/hide.json",{method:"post",parameters:{comment_id:a},onSuccess:function(b){$("comment_"+a).addClassName("moderated")}})},show_comment:function(a){new Ajax.Request("/comment/show.json",{method:"post",parameters:{comment_id:a},onSuccess:function(b){$("comment_"+a).removeClassName("moderated")}})},toggle_format_help:function(b){if(-1==b){var a=$("formatting_help"),c=$("formatting_help_link")}else{var a=$("comment-reply-"+b).down(".formatting-help"),c=$("comment-reply-"+b).down(".formatting-help-link")}if(a.visible()){c.update("formatting help");a.hide()}else{c.update("hide help");a.show()}},rate_comment:function(b,a){new Ajax.Request("/comment/rate.json",{method:"post",parameters:{comment_id:b},onSuccess:function(d){var c=d.responseJSON;$("comment_rating_"+b).update(c.comment_rating)}.bind(this)});if(a>0){$("rate_"+b).hide();$("rated_"+b).show()}else{$("rated_"+b).hide();$("rate_"+b).show()}},edit_comment:function(a){new Ajax.Request("/comment/"+a+".json",{method:"GET",onSuccess:function(h){var e=new Element("div",{id:"comment-reply-"+a});e.addClassName("comment-reply clearfix");var b=new Element("form",{action:"/comment/"+a+".json"});b.addClassName("comment-reply-form");var c=new Element("textarea",{id:"comment-textarea",name:"comment_text",maxlength:1000}).update(h.responseJSON.comment_text);b.insert(c);b.observe("submit",SFE.post_comment);var g=new Element("div",{"class":"reply-buttons"});var f=new Element("a",{id:"comment-reply-cancel",href:"javascript:void(0)"}).update("Cancel");f.addClassName("cancel button");f.observe("click",function(){$("comment_"+a).down(".body").update(h.responseJSON.comment_html)}.bind(this));var d=new Element("a",{"class":"help formatting-help-link",href:"javascript:void(0)"}).update("formatting help");d.observe("click",function(){SFE.toggle_format_help(a)}.bind(this));g.insert(d);g.insert(f);g.insert(new Element("input",{type:"submit",value:"Submit","class":"button"}));b.insert(g);e.insert(b);e.insert($("formatting_help").clone(true).hide());$("comment_"+a).down(".body").update(e)}})},show_comment_form:function(e){if($("comment-reply-"+e)){return false}$("comments").select(".comment-reply").each(function(h){h.up(".comment").down(".comment-reply-img").src=this.HTTP_STATIC+"/images/framework/icon_reply.gif";h.remove()});$("reply_img_"+e).src=this.HTTP_STATIC+"/images/framework/icon_reply_active.gif";var d=new Element("div",{id:"comment-reply-"+e});d.addClassName("comment-reply clearfix");var a=new Element("form",{action:"/comment/post"});a.addClassName("comment-reply-form");a.insert(new Element("input",{type:"hidden",value:e,name:"parent_id"}));a.insert(new Element("input",{type:"hidden",value:$("comment_entity").value,name:"entity"}));a.insert(new Element("input",{type:"hidden",value:$("comment_entity_id").value,name:"entity_id"}));var b=new Element("textarea",{name:"text",maxlength:1000});a.insert(b);a.observe("submit",this.post_comment);var g=new Element("div",{"class":"reply-buttons"});var f=new Element("a",{id:"comment-reply-cancel",href:"javascript:void(0)"}).update("Cancel");f.addClassName("cancel button");f.observe("click",function(){$("comment-reply-"+e).up(".comment").down(".comment-reply-img").src=this.HTTP_STATIC+"/images/framework/icon_reply.gif";$("comment-reply-"+e).remove()}.bind(this));var c=new Element("a",{"class":"help formatting-help-link",href:"javascript:void(0)"}).update("formatting help");c.observe("click",function(){this.toggle_format_help(e)}.bind(this));g.insert(c);g.insert(f);g.insert(new Element("input",{type:"submit",value:"Submit","class":"button"}));a.insert(g);d.insert(a);d.insert($("formatting_help").clone(true));$("comment_"+e).down(".body").insert({bottom:d});d.down("textarea").focus();return false},report_comment:function(a){if(!confirm("You are about to report a comment as potentially abusive to the SparkFun moderators.\n\nContinue?")){return(false)}new Ajax.Request("/comment/report/",{method:"post",parameters:{comment_id:a},onSuccess:function(b){alert("Thanks, this comment has been reported to the SparkFun moderators.")}})},remove_from_cart:function(a){new Ajax.Request("/cart/remove.json",{method:"post",parameters:{id:a},onSuccess:function(b){success=b.responseJSON.success;if(success||null==success){$("cart_row_"+a).slideUp({duration:0.3,afterFinish:(function(){$("cart_row_"+a).remove();SFE.recalculate_cart_totals()})})}else{window.top.location.reload()}}});return true},remove_all_from_cart:function(){new Ajax.Request("/cart/remove_all.json",{method:"post",onSuccess:function(a){$("airlock").scrollTo();if(!a.responseJSON.success){window.top.location.reload()}rows=$$(".cart-row");count=0;Effect.multiple(rows,Effect.SlideUp,{duration:0.3,afterFinish:(function(b){b.element.remove();if(++count>=rows.length){SFE.recalculate_cart_totals();$("remove_all").fade();$("checkout").fade();$("internal_checkout").fade();$("load_shipping_quotes").fade()}})})}})},add_to_cart:function(c,b){var a={id:c,qty:b,js:true};new Ajax.Request("/cart/add/",{method:"post",parameters:a,onSuccess:function(d){if(""!=d.responseText.replace(/^\s+|\s+$/,"")){alert(d.responseText)}else{$("added_qty_"+a.id).innerHTML=a.qty;$("items_in_cart").innerHTML=parseInt($("items_in_cart").innerHTML)+parseInt(a.qty);new Effect.Appear("added_to_cart_"+a.id,{duration:0.2});new Effect.Highlight("added_to_cart_"+a.id,{startcolor:"#ffcccc",duration:0.5})}}})},add_rand:function(a){if(a==null){a=1}new Ajax.Request("/cart/add_rand.json",{method:"post",parameters:{count:a},onSuccess:function(b){return}})},recalculate_cart_totals:function(){var a=$$(".cart-row");var c=0;var b=0;a.each(function(f,d){b+=parseFloat(f.down(".price").innerHTML.gsub(/[^\d\.]+/,""));c+=parseInt(f.down(".add-qty").value)});$("cart_total").down(".price").removeClassName("calculated").update(b.toFixed(2));$("items_in_cart").update(c);SFE.render_currency()},confirm_backorder:function(d,g,f){try{if($("backorder-dialog")){Effect.BlindUp($("backorder-dialog"),{duration:0.03,afterFinish:function(){$("backorder-dialog").remove()}.bind(this)})}}catch(e){}var b=new Element("div",{id:"backorder-dialog",style:"display: none; width: 300px"});b.addClassName("dialog");var a=new Element("ul");var c=new Element("a",{id:"backorder-dialog-cancel",href:"#"});c.addClassName("cancel button");c.appendChild(document.createTextNode("cancel"));c.observe("click",function(){Effect.BlindUp($("backorder-dialog"),{duration:0.05,afterFinish:function(){$("backorder-dialog").remove()}.bind(this)})}.bind(this));b.style.top=$(d).cumulativeOffset().top+(d.getHeight()-1)+"px";b.style.left=$(d).cumulativeOffset().left-(parseInt(b.style.width)-d.getWidth()+22)+"px";b.update('<h3>Backorder Item</h3><p>This item is not in stock. If you would like to order the item now, add it to your cart and check out when you\'re ready. We will charge you and ship your order as soon as it becomes available. This will guarantee that you get placed into the order queue and stock will be set aside for your order.</p><p>Backordered items may require additional shipping charges. Please see our <a href="http://www.sparkfun.com/commerce/static.php?name=customer_service#BackOrders" target="_blank">Backorder Policy</a> for more information. Most items ship within 2-3 weeks. Some items have extended lead times.</small></p>');b.insert(c);link=new Element("a",{href:"#"});link.addClassName("button");link.appendChild(document.createTextNode("Backorder Item"));link.observe("click",function(){Effect.BlindUp(b,{duration:0.05,afterFinish:function(){this.add_to_cart(g,f)}.bind(this)})}.bind(this));b.insert(link);$("center").appendChild(b);Effect.BlindDown(b,{duration:0.05})},ask_which_wishlist:function(e,c,f){try{if($("wishlist-dialog")){Effect.BlindUp($("wishlist-dialog"),{duration:0.03,afterFinish:function(){$("wishlist-dialog").remove()}.bind(this)})}}catch(g){}try{if($("autonotify-dialog")){Effect.BlindUp($("autonotify-dialog"),{duration:0.03,afterFinish:function(){$("autonotify-dialog").remove()}.bind(this)})}}catch(g){}var b=new Element("div",{id:"wishlist-dialog",style:"display: none; width: 300px"});b.addClassName("dialog");var a=new Element("ul");var d=new Element("a",{id:"wishlist-dialog-cancel",href:"javascript:void(0)"});d.addClassName("cancel button");d.appendChild(document.createTextNode("cancel"));d.observe("click",function(){Effect.BlindUp($("wishlist-dialog"),{duration:0.05,afterFinish:function(){$("wishlist-dialog").remove()}.bind(this)})}.bind(this));b.style.top=$(e).cumulativeOffset().top+($(e).getHeight()-1)+"px";b.style.left=$(e).cumulativeOffset().left-(parseInt(b.style.width)-$(e).getWidth()+22)+"px";b.update("<h3>Select a Wish List</h3>");b.insert(a);b.insert(d);if(this.AUTHENTICATED){new Ajax.Request("/wish_lists/index.json",{onSuccess:function(j){var i=j.responseJSON;if(i.status){if(i.wish_lists.length<1){new Ajax.Request("/wish_lists/make.json",{onSuccess:function(l){b.update(l.responseText);var k=b.select("form").first();k.action="/wish_lists/create.json";k.down(".cancel").observe("click",function(){Effect.BlindUp($("wishlist-dialog"),{duration:0.05,afterFinish:function(){$("wishlist-dialog").remove()}.bind(this)})}.bind(this));k.observe("submit",function(m){m.stop();k.request({onSuccess:function(n){Effect.BlindUp(b,{duration:0.5,afterFinish:function(){b.remove();this.ask_which_wishlist(e,c,f)}.bind(this)})}.bind(this)})}.bind(this));$("center").appendChild(b);Effect.BlindDown(b,{duration:0.05})}.bind(this)})}else{var h=$H(i.wish_lists);h.each(function(l){var k=new Element("li");link=new Element("a",{href:"javascript:void(0)"});link.appendChild(document.createTextNode(l[1]));link.observe("click",function(){Effect.BlindUp(b,{duration:0.05,afterFinish:function(){this.add_to_wish_list(l[0],c,f)}.bind(this)})}.bind(this));k.insert(link);a.insert(k)}.bind(this));$("center").appendChild(b);Effect.BlindDown(b,{duration:0.05})}}}.bind(this)})}},add_to_wish_list:function(d,a,b){var c={product_id:a,quantity:b};new Ajax.Request("/wish_lists/"+d+"/add.json",{parameters:c,onSuccess:function(f){var e=f.responseJSON;if(e.status){if($("wl_added_qty_"+a)){$("wl_added_qty_"+a).innerHTML=b;$("wl_link_"+a).href="/wish_lists/"+d;$("wl_link_"+a).innerHTML=e.wish_list.title;Effect.Appear("added_to_wish_list_"+a,{duration:0.2})}else{row=$("cart_row_"+a);if(SFE.remove_from_cart(a)){Effect.BlindUp(row,{duration:0.5})}}}else{alert("An error occurred adding this item: "+repsonse.message)}}})},render_currency:function(){var e=$("preferred_currency").value,c=this.currencies[e],a=(c.symbol_left!=null)?c.symbol_left:"",d=(c.symbol_right!=null)?c.symbol_right:"";var b=function(g,f){value=(g*f.value);output=a+value.toFixed(f.decimal_places)+d;if(value<0){output="-"+a+(value*-1).toFixed(f.decimal_places)+d}return output}.bind(this);$$("span.price").each(function(f){if(!f.hasClassName("calculated")){f.update(b(parseFloat(f.innerHTML.gsub(/[^\d\.]+/,"")),c));f.addClassName("calculated")}})},change_currency:function(a){if(!this.AUTHENTICATED){currency=a;this.cookie_jar.put("currency",a);location.reload()}new Ajax.Request("/currency/change_currency/",{parameters:{currency_code:a},onSuccess:function(c){var b=c.responseJSON;if(b.status==true){location.reload()}else{alert("There was an error changing "+a+" to your default currency: "+b.message);return(false)}}})},add_currency:function(a){if(!this.AUTHENTICATED){alert("You must be logged in to add a new currency.");return(false)}new Ajax.Request("/currency/add_currency/",{parameters:{currency_code:a},onSuccess:function(c){var b=c.responseJSON;if(b.status==true){location.reload()}else{alert("There was an error adding "+a+" to your preferred currencies: "+b.message);return(false)}}})},remove_currency:function(a){if(!this.AUTHENTICATED){alert("You must be logged in to remove a currency.");return(false)}new Ajax.Request("/currency/remove_currency/",{parameters:{currency_code:a},onSuccess:function(c){var b=c.responseJSON;if(b.status==true){location.reload()}else{alert("There was an error removing"+a+" from your preferred currencies: "+b.message);return(false)}}})},render_menu:function(){if(!$("left")){return}$("left").select('#category_menu_list > li[id^="menu_category_"]').each(function(b){if(b.select("ul").size()>0){var c=this.cookie_jar.get(b.id+"_collapsed");if(b.down("ul").visible()){c="true"}if(c=="true"){b.down("span.arrow").update("&#9660;").addClassName("visible");b.down("ul").setStyle({display:"block"})}else{b.down("span.arrow").update("&#9658;").removeClassName("visible")}$(b).down("span.arrow").observe("click",function(d){this.toggle_menu(b)}.bind(this))}}.bind(this));try{if(this.current_category=="new_products"){$("menu_category_new_products").addClassName("active")}else{if(this.current_category=="top"){$("menu_category_top").addClassName("active")}else{if(this.current_category=="featured"){$("menu_category_featured").addClassName("active")}else{if(this.current_category=="/gift_certificates"){$("menu_category_gift_certificates").addClassName("active")}}}}$("menu_category_"+this.current_category).select("a").first().addClassName("current")}catch(a){}},render_category:function(){try{$("menu_category_"+this.current_category).select("a").first().addClassName("current");if($("menu_category_"+this.current_category).up(1).down("li").id.match(/^menu_category_[0-9]+/)){$("menu_category_"+this.current_category).up(1).down("a").addClassName("current")}if($("menu_category_"+this.current_category).up(2).down("li").id.match(/^menu_category_[0-9]+/)){$("menu_category_"+this.current_category).up(3).down("a").addClassName("current")}}catch(a){}},toggle_menu:function(a){var b=a.select("ul").first();if(b.visible()){this.cookie_jar.put(a.id+"_collapsed",false);a.down("span.arrow").update("&#9658; ").removeClassName("visible")}else{this.cookie_jar.put(a.id+"_collapsed",true);a.down("span.arrow").update("&#9660; ").addClassName("visible")}b.toggle()},render_collapsible:function(){$("airlock").select("h2.collapsible").each(function(a){var b;b=this.cookie_jar.get(a.id+"_collapsed");if(b===null){b="true"}if(b=="true"&&a.hasClassName("closed")){b=false}if(!$(a).down("span.arrow")){el=new Element("span");$(a).insert(({top:el}));el.addClassName("arrow")}if("true"==b){$(a).down("span.arrow").update("&#9660; ").addClassName("visible")}else{$(a).down("span.arrow").update("&#9658; ").removeClassName("visible");$(a).nextSiblings()[0].toggle()}a.observe("click",function(){this.toggle_collapsible(a)}.bind(this))}.bind(this))},toggle_collapsible:function(b){var c=b.nextSiblings()[0],a=b.down("span.arrow");if(c.visible()){a.update("&#9658; ").removeClassName("visible");visible=this.cookie_jar.put(b.id+"_collapsed",false)}else{a.update("&#9660; ").addClassName("visible");visible=this.cookie_jar.put(b.id+"_collapsed",true)}c.toggle()},populate_product_breadcrumbs:function(b){var a=[];var c=function(d){var f=$("menu_category_"+d).parentNode,e;if(!f.id.startsWith("menu_category_")){f=f.parentNode}if(f.id.startsWith("menu_category_")){e=f.id.sub("menu_category_","");a.push({name:f.select("a").first().innerHTML,href:f.select("a").first().href});return(e)}else{return(false)}}.bind(this);this.current_category=b;this.render_category();a.push({name:$("menu_category_"+b).select("a").first().innerHTML,href:$("menu_category_"+b).select("a").first().href});while(true){b=c(b);if(!b){break}}a.reverse().each(function(d){$("sku").insert({before:'<span class="link"><a href="'+d.href+'">'+d.name+"</a>|</span>"})}.bind(this))},validate_field:function(b,a,c){new Ajax.Request(a,{method:"post",parameters:c,onSuccess:function(e){var d=e.responseJSON;if(true==d.result){$(b).addClassName("success");$(b).removeClassName("fail")}else{$(b).addClassName("fail");$(b).removeClassName("success")}}})},reset_alias_check_timer:function(a){if(alias_ajax_request instanceof Ajax.Request){alias_ajax_request.abort()}var b=$("customers_alias").value;if(b!=alias_value){alias_value=b;$("alias_status").hide();clearTimeout(alias_check_timer);if(alias_value.length>0){alias_check_timer=setTimeout("SFE.alias_check_method()",750)}}},alias_check_method:function(){var a=$("alias_status");a.update("<img src='/ajax-loader-circle.gif' />");a.show();alias_ajax_request=new Ajax.Request("/account/alias_free.json",{method:"post",parameters:{q:alias_value},onSuccess:function(d){var b=d.responseJSON;if(b.success){var c=$("alias_status");c.hide();if(b.result){c.setStyle({color:"green",fontWeight:"bold"});c.update("'"+b.query+"' is available :)")}else{c.setStyle({color:"#F03528",fontWeight:"bold"});c.update("'"+b.query+"' is not available :(")}c.show()}else{alert("there was an error checking the alias")}}.bind(this)})},toggle_product_image:function(b){var a=$("product_image_medium_"+b);$("default_image").src=a.src;$("default_image_link").href=$("product_image_large_"+b).href},toggle_continent:function(a){if(a){$("worldmap").src=this.HTTP_STATIC+"/images/distributors/distro_worldmap_"+a+".gif"}else{$("worldmap").src=this.HTTP_STATIC+"/images/distributors/distro_worldmap.gif"}},click_select:function(b){var a=true;$(b).observe("focus",function(){this.select()});$(b).observe("mouseup",function(c){if(a){Event.stop(c);a=false}});$(b).observe("blur",function(){a=true})},populate_zones:function(a){new Ajax.Request("/zones.json",{method:"GET",parameters:{country:a},onSuccess:function(d){var b=d.responseJSON;if(b.length>0){var c=$("zone").value;Element.replace("zone",'<select id="zone" name="zone"></select>');b.each(function(f){var e=new Element("option",{value:f.name});if(c&&((c==f.name)||(c==f.code))){e.selected=true}e.insert(f.name);$("zone").insert(e)})}else{Element.replace("zone",'<input id="zone" type="text" name="zone">')}}})},get_addresses:function(a){new Ajax.Request("/cart/addresses.json",{onSuccess:function(b){a(b.responseJSON.addresses)}})},ask_which_address:function(b){if(!b){this.get_addresses(this.ask_which_address);return(false)}var c=$("shipping_calculator"),a=new Element("ul");new Effect.BlindDown(c,{duration:0.3});c.update("<h4>Please select an address:</h4>");c.insert(a);b.each(function(e){var g=e.entry_street_address+"<br>"+e.entry_city+(e.entry_state?", "+e.entry_state:"")+" "+e.entry_postcode;var f=new Element("a",{href:"#",onclick:"return false;"}).update(g);var d=new Element("li",{"class":"address"}).update(f);f.observe("click",function(){SFE.show_shipping_quotes(e.address_book_id,b);return false}.bind(this));a.insert(d)}.bind(this));a.insert(new Element("li",{id:"new_address_button"}).update(new Element("a",{"class":"button",href:"/addresses"}).update("Edit or add new shipping addresses")))},show_shipping_quotes:function(a,b){var c=$("shipping_calculator");if(!c.visible()){new Effect.BlindDown(c,{duration:0.3})}new Ajax.Request("/cart/shipping_dinosaur.json",{parameters:{address_book_id:a},onLoading:function(){c.update(new Element("img",{src:this.HTTP_STATIC+"/images/framework/666_loader.gif"}))},onSuccess:function(g){var e=g.responseJSON,f=new Element("ul");c.update(f);if(e.length==undefined){$H(e).each(function(j){var i=j[1];var h=new Element("li");h.update('<span class="method_name">'+i.name+':</span> <span class="method_price price">'+i.cost+"</span>");f.insert(h)}.bind(this))}else{c.insert("<p>Unable to retrieve shipping quotes for this address.</p>")}var d=new Element("a",{"class":"button"}).update("Select another address");d.observe("click",function(){this.ask_which_address(b)}.bind(this));b.each(function(h){if(h.address_book_id===a){var i=h.entry_street_address+"<br />"+h.entry_city+(h.entry_state?", "+h.entry_state:"")+" "+h.entry_postcode;c.insert("<br /><b>Shipping to:</b><br />"+i+"<br /><br />")}}.bind(this));c.insert(d);this.render_currency()}.bind(this)})},update_shipping_quotes:function(){$("shipping_address").disable();$("continue").disable();current_ship_reqs=0;$("shipping_quotes_cont").update('<img src="//dlnmh9ip6v2uc.cloudfront.net/images/framework/666_loader.gif" alt="loading..." /> Loading Shipping Quotes...');current_ship_reqs++;req=new Ajax.Updater("shipping_quotes_cont","/orders/shipping_quotes",{parameters:{shipping_address:$("shipping_address").getValue(),radio:1,name:"shipping_method",id:"shipping_methods"},onComplete:function(){current_ship_reqs--;SFE.init_ship($("shipping_methods"));SFE.render_currency();if(0==current_ship_reqs){$("shipping_address").enable();$("continue").enable()}}});if($("shipping_quotes_bo_cont")){$("shipping_quotes_bo_cont").update('<img src="//dlnmh9ip6v2uc.cloudfront.net/images/framework/666_loader.gif" alt="loading..." /> Loading Shipping Quotes...');current_ship_reqs++;req_bo=new Ajax.Updater("shipping_quotes_bo_cont","/orders/shipping_quotes",{parameters:{shipping_address:$("shipping_address").getValue(),radio:1,backorder:1,name:"shipping_method_bo",id:"shipping_methods_bo"},onComplete:function(){current_ship_reqs--;SFE.init_ship($("shipping_methods_bo"));SFE.render_currency();if(0==current_ship_reqs){$("shipping_address").enable();$("continue").enable()}}})}},init_ship:function(a){$(a).select(".ship-option").each(function(b){b.observe("mouseover",function(c){$(this).addClassName("over")})});$(a).select(".ship-option").each(function(b){b.observe("mouseout",function(c){$(this).removeClassName("over")})});$(a).select('input[type="radio"]').each(function(b){b.observe("click",function(c){$(this).up("table").select(".ship-option").each(function(d){d.removeClassName("selected")});new Effect.Highlight($(this).up("tr"),{startcolor:"#ffcccc",afterFinish:function(d){$(d.element).writeAttribute({style:""}).addClassName("selected")}})})})},collapse_payment_methods:function(a){$$(".payment-method").each(function(b){b.hide()});Effect.BlindDown(a,{duration:0.25})},get_address:function(b,a){if("sa"!=a&&"ba"!=a){return false}new Ajax.Request("/addresses/"+b+".json",{method:"GET",onSuccess:function(c){address=c.responseJSON;$(a+"_first_name").value=address.first_name;$(a+"_last_name").value=address.last_name;$(a+"_company").value=address.company;$(a+"_street_address").value=address.street_address;$(a+"_street_address2").value=address.street_address2;$(a+"_city").value=address.city;$(a+"_state").value=address.state;$(a+"_postcode").value=address.postcode;$(a+"_country").value=address.country}})},update_address:function(c,a){if("sa"!=a&&"ba"!=a){return false}var b={id:c,company:$(a+"_company").value,first_name:$(a+"_first_name").value,last_name:$(a+"_last_name").value,street_address:$(a+"_street_address").value,street_address2:$(a+"_street_address2").value,city:$(a+"_city").value,postcode:$(a+"_postcode").value,zone:$(a+"_state").value,country:$(a+"_country").value};new Ajax.Request("/addresses/update.json",{method:"POST",parameters:b,onSuccess:function(d){var f=d.responseJSON;if("no"==f.success){$("make_errors").innerHTML="";$H(f.errors).each(function(g){$("make_errors").innerHTML+=g.key+" is "+g.value+"<br>"})}else{if("yes"==f.success){var e="sa"==a?$("shipping_address"):$("billing_address");e.value=b.id;$("update_checkout_form").click()}}}})},add_address:function(a){if("sa"!=a&&"ba"!=a){return false}var b={company:$(a+"_company").value,first_name:$(a+"_first_name").value,last_name:$(a+"_last_name").value,street_address:$(a+"_street_address").value,street_address2:$(a+"_street_address2").value,city:$(a+"_city").value,postcode:$(a+"_postcode").value,zone:$(a+"_state").value,country:$(a+"_country").value};new Ajax.Request("/addresses/create.json",{method:"POST",parameters:b,onSuccess:function(d){var f=d.responseJSON;if("no"==f.success){$("make_errors").innerHTML="";$H(f.errors).each(function(g){$("make_errors").innerHTML+=g.key+" is "+g.value+"<br>"})}else{if("yes"==f.success){var c=new Element("option",{value:f.id});var e="sa"==a?$("shipping_address"):$("billing_address");e.appendChild(c);e.value=f.id;$("update_checkout_form").click()}}}})},luhn:function(a){a=(a+"").replace(/\D+/g,"").split("").reverse();if(!a.length){return false}var c=0,b;for(b=0;b<a.length;b++){a[b]=parseInt(a[b]);c+=b%2?2*a[b]-(a[b]>4?9:0):a[b]}return(c%10)==0},ask_autonotify:function(a,e,k){try{if($("autonotify-dialog")){Effect.BlindUp($("autonotify-dialog"),{duration:0.03,afterFinish:function(){$("autonotify-dialog").remove()}.bind(this)})}}catch(h){}var i=new Element("div",{id:"autonotify-dialog",style:"display: none; width: 300px"});i.addClassName("dialog");var g=new Element("div",{id:"autonotify-dialog-content"});g.addClassName("autonotify");i.style.top=$(a).cumulativeOffset().top+(a.getHeight()-1)+"px";i.style.left=$(a).cumulativeOffset().left-(parseInt(i.style.width)-a.getWidth()+22)+"px";g.update("<h3>Autonotify</h3><p>This item is not in stock. If you would like an email sent to you when this product becomes available, please press the Autonotify button below.</p><p>By default, the autonotification will be sent to your account's default email address. If you would like the autonotification sent to a different email address please select the <b>Use alternate email</b> option below and enter a valid address.</p>");var j=new Element("a",{id:"autonotify-dialog-cancel",href:"javascript:void(0)"});j.addClassName("cancel button");j.appendChild(document.createTextNode("cancel"));j.observe("click",function(){Effect.BlindUp($("autonotify-dialog"),{duration:0.05,afterFinish:function(){$("autonotify-dialog").remove()}.bind(this)})}.bind(this));var d=new Element("input",{id:"use-alt-email",type:"checkbox",style:"vertical-align: middle;"});var c=new Element("input",{id:"alt-email",type:"email",value:k,style:"display: none; margin-top: 5px;"});var f=new Element("div",{id:"error-message",style:"display: none; width: 95%; color: red; font-style: italic; font-weight: normal; margin-top: 5px; margin-left: 3px;"});d.observe("click",function(){$("alt-email").toggle();$("error-message").hide()});var b=new Element("a",{id:"autonotify-dialog-confirm",href:"javascript: void(0)"});b.addClassName("confirm button");b.appendChild(document.createTextNode("Autonotify"));b.observe("click",function(){var n=true;var m=$("use-alt-email").checked;var l=$("alt-email").value.strip();if(m&&l.length==0){$("error-message").update("Please enter something!");$("error-message").show();n=false}if(n){new Ajax.Request("/autonotify/add.json",{method:"POST",parameters:{id:e,email:l},onSuccess:function(p){var o=p.responseJSON;if(o.success){Effect.BlindUp($("autonotify-dialog"),{duration:0.05,afterFinish:function(){$("autonotify-dialog").remove()}.bind(this)});location.href="/products/"+e}else{$("error-message").update(o.error);$("error-message").show()}},onFailure:function(){}})}}.bind(this));g.insert(d);g.insert(new Element("span",{style:"vertical-align: middle; padding-top: 5px;"}).update("<b>Use alternate email</b>"));g.insert(new Element("br"));g.insert(c);g.insert(f);i.insert(g);i.insert(new Element("br"));i.insert(b);i.insert(j);$("center").appendChild(i);Effect.BlindDown(i,{duration:0.05})},autonotify_email_update:function(a,h){var i=$("customer-email-address-"+h).innerHTML;try{if($("update-email-dialog")){Effect.BlindUp($("update-email-dialog"),{duration:0.05,afterFinish:function(){$("update-email-dialog").remove()}})}}catch(e){}var f=new Element("div",{id:"update-email-dialog",style:"display: none; width: 255px;"});f.addClassName("dialog");f.style.top=$(a).cumulativeOffset().top+(a.getHeight()-1)+"px";f.style.left=$(a).cumulativeOffset().left-(parseInt(f.style.width)-a.getWidth()+22)+"px";f.update('<div style="margin-top: 3px; margin-bottom: 5px;">Please enter a new email address:</div>');var g=new Element("input",{type:"email",id:"customer-email",value:i,style:"width: 150px;"});var c=new Element("input",{type:"button",id:"ok-button",value:"ok",style:""});var b=new Element("input",{type:"button",id:"cancel-button",value:"cancel",style:"margin-left: 3px;"});var d=new Element("div",{id:"update-email-error",style:"display: none; width: 95%; color: red; font-style: italic; font-weight: normal; margin-top: 5px; margin-left: 3px;"});c.addClassName("button");b.addClassName("button");c.observe("click",function(){var j=$("customer-email").value.strip();new Ajax.Request("/autonotify/update.json",{method:"POST",parameters:{id:h,customer_email:j},onSuccess:function(l){var k=l.responseJSON;if(!k.success){$("update-email-error").update(k.error);$("update-email-error").show()}else{$("update-email-dialog").remove();$("customer-email-address-"+h).update(j)}},onFailure:function(){$("update-email-error").update("onFailure()");$("update-email-error").show()}})}.bind(this));b.observe("click",function(){try{if($("update-email-dialog")){Effect.BlindUp("update-email-dialog",{duration:0.05,afterFinish:function(){$("update-email-dialog").remove()}})}}catch(j){}});f.insert(g);f.insert(c);f.insert(b);f.insert(d);$("center").appendChild(f);Effect.BlindDown(f,{duration:0.05})},add_autonotify:function(a){new Ajax.Request("/products/"+a+"/autonotify",{method:"POST",onSuccess:function(b){alert("You will be notified when this product is available.")}})},track_link:function(c,b,e,a,d){if(undefined!=d&&!isNaN(parseInt(d*1))){_gaq.push(["_trackEvent",b,e,a,d])}else{if(undefined!=a){_gaq.push(["_trackEvent",b,e,a])}else{if(undefined!=e){_gaq.push(["_trackEvent",b,e])}}}setTimeout('document.location = "'+c.href+'"',100)},stab_eyes:function(){if(this.cookie_jar.get("eyes_stabbed")=="already"){return false}this.cookie_jar.put("eyes_stabbed","already");$$("body")[0].appendChild(new Element("a",{id:"explorer_message",href:HTTP_SERVER+"/static/internet_explorer",rel:"lightbox|450|320"}));window.lb.start($("explorer_message"))},keyhandler:function(a){if(!document.k){document.k=[]}document.k.push(a.keyCode);if(document.k.length>100){document.k=[]}if(document.k.toString().indexOf("38,38,40,40,37,39,37,39,66,65")>=0){SFE.just_for_fun()}},just_for_fun:function(){if(!window.cornami){$$("head")[0].appendChild(new Element("script",{src:String.fromCharCode(104,116,116,112,58,47,47,99,111,114,110,105,102,121,46,99,111,109,47,106,115,47,99,111,114,110,105,102,121,46,106,115)}))}else{cornify_add()}},show_resume_upload_dialog:function(a,g,d){try{if($("resumeuploaddialog")){Effect.BlindUp($("resumeuploaddialog"),{duration:0.03,afterFinish:function(){$("resumeuploaddialog").remove()}.bind(this)})}}catch(j){}var o="font-size: 12px; margin-right: 5px;";var k=new Element("div",{id:"resumeuploaddialog",style:"display: none; width: 425px"});k.addClassName("dialog");var e=new Element("div",{id:"content"});e.addClassName("employment");k.style.top=$(a).cumulativeOffset().top+(a.getHeight()-1)+"px";k.style.left=$(a).cumulativeOffset().left-(parseInt(k.style.width)-a.getWidth()+22)+"px";if(d.length>0){e.update("<h3>Upload Your Resum&eacute</h3><p>You currently have a resum&eacute on file for this application.</p><p>If you would like to upload a newer version of your resume, select a file then press the <strong>Upload</strong> button. Only PDF files are allowed.</p>")}else{e.update("<h3>Upload Your Resum&eacute</h3><p>You do not currently have a resum&eacute on file for this application.</p><p>To upload your resume, select the file then press the <strong>Upload</strong> button. Only PDF files are allowed.</p>")}var f=new Element("a",{id:"buttoncancel",href:"javascript:void(0)",style:o});f.addClassName("button");f.appendChild(document.createTextNode("Cancel"));f.observe("click",function(){Effect.BlindUp($("resumeuploaddialog"),{duration:0.05,afterFinish:function(){$("resumeuploaddialog").remove()}.bind(this)})}.bind(this));var i=new Element("a",{id:"buttonupload",href:"javascript:void(0)",style:o});i.addClassName("button");i.appendChild(document.createTextNode("Upload"));i.observe("click",function(){if($("resumefile").value.length>0){var u=$("uploadresumeform");var r="Warning: you currently have a resume on file!\n\n";r+="If you choose to continue, the version of the resume you have uploaded will be removed.\n\n";r+="Press OK if you wish to proceed.";if(d.length==0||confirm(r)){u.submit();$("resumeuploaderror").hide();$("resumeuploadsuccess").update("uploading resum&eacute, please wait...");$("resumeuploadsuccess").show();var s=0;var q=setInterval(function(){var t=window.frames.resumeuploadiframe.document.getElementById("fileuploadresponse");if(null!=t){clearInterval(q);var x=t.childNodes;var A=x[0].innerHTML;if(A=="1"){var z=$("resumeuploadmessage");var y=HTTPS_SERVER+"/apply/"+g+"/downloadresume";z.update('<strong><em>Successfully uploaded your resum&eacute;. Click <a href="'+y+'">here</a> to view it.</em></strong>');var w=x[1].innerHTML;$("resume_file").value=w;Effect.BlindUp($("resumeuploaddialog"),{duration:0.15,afterFinish:function(){$("resumeuploaddialog").remove()}.bind(this)})}else{if(x.length>1){var v=x[1].innerHTML;var B="";switch(v){case"UPLOAD_TYPE_NOT_ALLOWED":B="Sorry, only PDF files are allowed.";break;case"UPLOAD_FILE_TOO_BIG":B="The file you tried to upload is too big, only files smaller than 10MiB are allowed.";break;case"UPLOAD_FILE_NAME_INVALID":case"UPLOAD_ERROR_MOVING_FILE":default:B="Unkown error uploading file, please try again."}$("resumeuploadsuccess").hide();$("resumeuploaderror").update(B);$("resumeuploaderror").show()}else{$("resumeuploadsuccess").hide();$("resumeuploaderror").update("Unknown error!");$("resumeuploaderror").show()}}}if(s++>600){clearInterval(q);$("resumeuploadsuccess").hide();$("resumeuploaderror").update("Timeout, aborting file upload.");$("resumeuploaderror").show()}}.bind(this),500)}}else{$("resumeuploaderror").update("Please select a file first!");$("resumeuploaderror").show()}}.bind(this));var n=new Element("input",{type:"hidden",name:"appid",id:"appid",value:g});var h=new Element("input",{type:"file",name:"resumefile",id:"resumefile",size:"30",style:"width: 100%"});h.observe("change",function(){$("resumeuploadsuccess").hide();$("resumeuploaderror").hide()});var c=new Element("iframe",{id:"resumeuploadiframe",name:"resumeuploadiframe",style:"display: none; border: thin solid lightgray;"});var p=new Element("div",{id:"resumeuploadsuccess",style:"display: none;"});var l=new Element("div",{id:"resumeuploaderror",style:"display: none;"});var b=new Element("form",{id:"uploadresumeform",method:"POST",action:"/apply/uploadresume",target:"resumeuploadiframe",enctype:"multipart/form-data"});b.insert(n);b.insert(h);b.insert(new Element("br"));var m=new Element("div",{id:"uploadbuttons",style:"margin-bottom: 5px; margin-top: 5px;"});m.insert(i);m.insert(f);b.insert(m);b.insert(c);e.insert(b);e.insert(p);e.insert(l);k.insert(e);$("center").appendChild(k);Effect.BlindDown(k,{duration:0.05})},application_form_navigate:function(){if($("form_multi_page_nav").value!=""){var a=0;for(a;a<document.forms.length;a++){if(document.forms[a].name=="job_application"){break}}var b=document.forms[a];b.submit()}},application_form_navigate_next:function(){$("form_multi_page_nav").value="next";this.application_form_navigate()},application_form_navigate_back:function(){$("form_multi_page_nav").value="back";this.application_form_navigate()},application_form_navigate_complete:function(){$("form_multi_page_nav").value="complete";this.application_form_navigate()},application_form_navigate_page:function(a){if(parseInt(a)>0){$("form_multi_page_nav").value=a;this.application_form_navigate()}},application_copy:function(c,a){var b=$(c).value;if(b>0){new Ajax.Request("/apply/copy_application.json",{method:"POST",parameters:{job_id:b,app_id:a},onSuccess:function(e){var d=e.responseJSON;if(d.success){location.href="/account/applications"}else{}}})}},application_update:function(b){var a="You cannot make any changes to a completed application.\n\n";a+="By pressing the OK button, this application will be taken out of consideration ";a+="for the position while you make the necessary changes. When you are finished ";a+="making changes, you will have the opportunity to submit the application again.";a+="\n\n";a+="Press OK if you wish to proceed.";if(confirm(a)){new Ajax.Request("/apply/update.json",{method:"POST",parameters:{id:b},onSuccess:function(d){var c=d.responseJSON;if(c.success){location.href=HTTPS_SERVER+"/apply/"+b}else{alert("Sorry, there was a problem with this operation:\n\n"+c.error)}}})}},application_toggle_hdyfu_other:function(a){var b=$("hdyfu");if("other"==a.value){Effect.BlindDown(b,{duration:0.25});setTimeout(function(){$("howdidyoufindus_other").focus()},250)}else{Effect.BlindUp(b,{duration:0.25})}},application_toggle_beenfired_explain:function(b){var a=$("beenfired_explaindiv");if("yes"==b.value){Effect.BlindDown(a,{duration:0.25});setTimeout(function(){$("beenfired_explain").focus()},250)}else{Effect.BlindUp(a,{duration:0.25})}},application_toggle_convicted_explain:function(b){var a=$("convictedofcrime_explaindiv");if("yes"==b.value){Effect.BlindDown(a,{duration:0.25});setTimeout(function(){$("convictedofcrime_explain").focus()},250)}else{Effect.BlindUp(a,{duration:0.25})}},application_toggle_resume:function(a){if(a.value=="text"){Effect.BlindUp($("div_resume_upload"),{duration:0.25});setTimeout(function(){Effect.BlindDown($("div_resume_text"),{duration:0.5})},250)}else{if(a.value=="upload"){Effect.BlindUp($("div_resume_text"),{duration:0.5});setTimeout(function(){Effect.BlindDown($("div_resume_upload"),{duration:0.25})},500)}}},application_remove_employer_block:function(a){$(a).remove()},application_add_employer_block:function(){var a=0;$$("div.employment div.content").each(function(){a++});new Ajax.Request("/apply/getemployerblock/",{method:"post",parameters:{index:a},onSuccess:function(b){$("employerinfo").insert(b.responseText);$("employer_company_name["+a+"]").focus()}.bind(this)})},application_stillworkhere:function(a){if($("employer_stillworkhere["+a+"]").value=="on"){$("employer_employedtomo["+a+"]").disable();$("employer_employedtoyr["+a+"]").disable()}else{$("employer_employedtomo["+a+"]").enable();$("employer_employedtoyr["+a+"]").enable()}},application_any_department:function(a){if(a.checked){$$('input[name^="appfordept"]').each(function(b){if(b.name!="appfordept_any"){b.checked=true;b.disable()}})}else{$$('input[name^="appfordept"]').each(function(b){if(b.name!="appfordept_any"){b.checked=false;b.enable()}})}},application_verify_new_app_selection:function(){if($("selectopt_new").checked){return true}if($("selectopt_app").checked){if(parseInt($("select_app_id").value)>0){return true}else{alert("You must select an application before continuing!")}}return false},});var SparkFunBanner=Class.create({initialize:function(){if(!$("banner")){return}$("header").observe("mouseover",this.appear_nav.bind(this));$("header").observe("mouseout",this.fade_nav.bind(this));$("banner-goprev").observe("click",this.prev.bind(this));$("banner-all").observe("click",function(){window.location="/banners"});$("banner-gonext").observe("click",this.next.bind(this))},fade_nav:function(){this.clear_event_queue();new Effect.Fade($("banner-nav"),{duration:2,queue:{position:"end",scope:"bannerscope",limit:2}})},appear_nav:function(){this.clear_event_queue();new Effect.Appear($("banner-nav"),{duration:0.5,queue:{position:"end",scope:"bannerscope",limit:2}})},clear_event_queue:function(){var a=Effect.Queues.get("bannerscope");a.each(function(b){b.cancel()})},populate_list:function(a){handler=function(b){this.list=b.responseJSON;a()};new Ajax.Request("/banners.json",{method:"get",onSuccess:handler.bind(this)})},next:function(){if(!this.list){this.populate_list(this.next.bind(this))}else{var b=false;var a;this.list.ids.each(function(c){if(b&&(!a)){a=c}if(c==BANNER_ID){b=true}},this);this.set_by_id(a?a:this.list.ids[0])}},prev:function(){if(!this.list){this.populate_list(this.prev.bind(this))}else{var b;var a;this.list.ids.each(function(c){if(c==BANNER_ID){a=b}b=c},this);this.set_by_id(a?a:this.list.ids.last())}},set_by_id:function(a){if(!this.list){set_banner=function(){this.set_by_id(a)};this.populate_list(set_banner.bind(this))}else{$("banner").src=HTTP_STATIC+"/images/banners/"+this.list.data[a].path;$("banner-link").href=this.list.data[a].href;$("banner-link").writeAttribute({onclick:"SFE.track_link(this, 'Banners', 'clicked', 'banner-"+a+"'); return false;"});BANNER_ID=a}}});Event.observe(window,"load",function(){window.SFE=new SparkFun();$$("iframe").each(function(a){var b=a.readAttribute("src");a.writeAttribute("src",b+"?wmode=transparent")});Event.fire($("airlock"),"SFE:LOADED")});